<!DOCTYPE html>
<html>
<head>
    <title>æ—¶ç©ºå›å»Š - è§£è°œRPG</title>
    <style>
        body {
            font-family: 'å¾®è½¯é›…é»‘', sans-serif;
            background: #2c3e50;
            color: #ecf0f1;
            line-height: 1.6;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }
        .scene {
            background: #34495e;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            display: none;
        }
        button {
            background: #3498db;
            border: none;
            color: white;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        .inventory {
            position: fixed;
            top: 20px;
            right: 20px;
            background: #34495e;
            padding: 15px;
            border-radius: 10px;
        }
        #musicToggle {
            position: fixed;
            bottom: 20px;
            left: 20px;
        }
    </style>
</head>
<body>
    <audio id="bgm" loop>
        <source src="https://cdn.pixabay.com/audio/2023/03/27/audio_6a5c0d9d28.mp3" type="audio/mpeg">
    </audio>

    <div class="inventory">
        <h3>ç‰©å“æ </h3>
        <div id="items"></div>
    </div>

    <div id="scene1" class="scene">
        <h2>ç¬¬ä¸€ç« ï¼šç¥ç§˜é‚€è¯·</h2>
        <p>æ·±å¤œï¼Œä½ æ”¶åˆ°å·²æ•…ç¥–çˆ¶å¯„æ¥çš„ä¿¡ï¼š"è‹¥è§æ­¤ä¿¡ï¼Œé€Ÿæ¥è€å®…ã€‚çœŸç›¸éƒ½åœ¨é‚£ä¸ªé“œç›’é‡Œ..."</p>
        <p>æ¨å¼€å°˜å°çš„å¤§é—¨ï¼Œæœˆå…‰é€è¿‡å½©çª—åœ¨åœ°ä¸ŠæŠ•å°„å‡ºå¥‡æ€ªçš„ç¬¦å·...</p>
        <button onclick="showScene(2)">æ£€æŸ¥åœ°ä¸Šçš„ç¬¦å·</button>
        <button onclick="addItem('è€é’¥åŒ™')">æŸ¥çœ‹é—¨è¾¹çš„æŠ½å±‰</button>
    </div>

    <div id="scene2" class="scene">
        <h2>ç¬¦å·ä¹‹è°œ</h2>
        <p>åœ°é¢ä¸Šæ’åˆ—ç€ä¸ƒä¸ªæ±‰å­—ï¼šç”Ÿã€æ­»ã€æ—¶ã€ç©ºã€é—¨ã€é’¥ã€å¿ƒ</p>
        <p>å¢™ä¸Šæœ‰æ¨¡ç³Šæç¤ºï¼šä»¥å§‹ä¸ºç»ˆ ä»¥ç»ˆä¸ºå§‹</p>
        <input type="text" id="puzzle1" placeholder="è¯·è¾“å…¥æ­£ç¡®æ’åˆ—">
        <button onclick="checkPuzzle(1)">ç¡®è®¤</button>
    </div>

    <div id="scene3" class="scene">
        <h2>å›¾ä¹¦é¦†è°œå½±</h2>
        <p>ä¹¦æ¶åä¼ æ¥å•œæ³£å£°ï¼Œä¸€ä¸ªåŠé€æ˜çš„å°å¥³å­©æ­£åœ¨æ‰¾ä¹¦ï¼š"å“¥å“¥èƒ½å¸®æˆ‘ç®—ç®—å—ï¼Ÿ"</p>
        <p>"çˆ¸çˆ¸è¯´æŠŠå¹´é¾„åŠ 130å†å¼€å¹³æ–¹ï¼Œå°±æ˜¯å¼Ÿå¼Ÿç°åœ¨çš„å¹´é¾„..."</p>
        <input type="number" id="puzzle2">
        <button onclick="checkPuzzle(2)">å›ç­”</button>
    </div>

    <div id="ending" class="scene">
        <h2>çœŸç›¸å¤§ç™½</h2>
        <p>é“œç›’æ‰“å¼€ï¼Œæ³›é»„çš„ç…§ç‰‡é£˜è½ï¼š1943å¹´ï¼Œç¥–çˆ¶ä¸å¹´è½»æ—¶çš„è‡ªå·±åˆå½±...</p>
        <p>åŸæ¥æ—¶ç©ºå›å»Šçš„å®ˆæŠ¤è€…ï¼Œæ­£æ˜¯ä¸åŒæ—¶é—´çº¿çš„è‡ªå·±...</p>
        <button onclick="resetGame()">é‡æ–°å¼€å§‹</button>
    </div>

    <button id="musicToggle" onclick="toggleMusic()">ğŸµ å…³é—­éŸ³ä¹</button>

    <script>
        let musicOn = true;
        const bgm = document.getElementById('bgm');
        
        function toggleMusic() {
            musicOn = !musicOn;
            document.getElementById('musicToggle').textContent = musicOn ? 'ğŸµ å…³é—­éŸ³ä¹' : 'ğŸµ å¼€å¯éŸ³ä¹';
            musicOn ? bgm.play() : bgm.pause();
        }

        function showScene(sceneId) {
            document.querySelectorAll('.scene').forEach(s => s.style.display = 'none');
            document.getElementById(`scene${sceneId}`).style.display = 'block';
        }

        function addItem(item) {
            if(!document.getElementById(item)) {
                const div = document.createElement('div');
                div.id = item;
                div.textContent = item;
                document.getElementById('items').appendChild(div);
            }
        }

        function checkPuzzle(type) {
            if(type === 1) {
                const answer = document.getElementById('puzzle1').value;
                if(answer === 'é—¨é’¥æ—¶ç”Ÿæ­»ç©º') {
                    showScene(3);
                } else {
                    alert('ç¬¦å·å‘å‡ºçº¢å…‰...');
                }
            } else if(type === 2) {
                const age = parseInt(document.getElementById('puzzle2').value);
                if(age === 14) { // (x+130)çš„å¹³æ–¹æ ¹æ˜¯æ•´æ•° â†’ x=14
                    showScene('ending');
                } else {
                    alert('å°å¥³å­©çš„å“­å£°æ›´å¤§äº†...');
                }
            }
        }

        function resetGame() {
            document.getElementById('items').innerHTML = '';
            showScene(1);
        }

        // åˆå§‹åŒ–æ¸¸æˆ
        showScene(1);
        bgm.play();
    </script>
</body>
</html>
